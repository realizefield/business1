{% extends "base.html" %}
{% block content %}
<style>
    .step-navigation { display: flex; gap: 10px; align-items: center; justify-content: center; margin-bottom: 30px; }
    .step-navigation .step-item { width: 130px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 25px; font-weight: bold; text-decoration: none; color: #666; background-color: #f8fafc; border: 1px solid #e2e8f0; }
    .step-navigation .step-item.active { background-color: #dbeafe; color: #1e40af; border: 2px solid #3b82f6; }
    
    .intro-box { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    
    /* 分数と斜線・途中式のスタイル */
    .fraction-flow { display: flex; align-items: center; justify-content: center; gap: 20px; margin: 50px 0; }
    .fraction { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; font-size: 2.8em; position: relative; }
    .fraction .num { border-bottom: 3px solid #333; padding: 0 10px; position: relative; }
    
    .cancel-line { text-decoration: line-through; color: #94a3b8; }
    .red-num { color: #dc2626; font-weight: bold; position: absolute; font-size: 0.5em; z-index: 10; }
    
    /* ÷2 などの枠 */
    .calc-box { border: 1px solid #333; padding: 2px 8px; font-size: 0.4em; position: absolute; background: white; z-index: 20; color: #dc2626; }

    .blue-info-box { border-left: 5px solid #3b82f6; background-color: #f0f9ff; padding: 25px; border-radius: 0 15px 15px 0; font-size: 1.2em; text-align: left; line-height: 1.8; }
</style>

<div class="page-container">
    <h1 style="color: #1e40af;">MA02_3 約分 ② 【① 導入】</h1>
    <div class="step-navigation">
        <div class="step-item active">① 導入</div>
        <a href="{{ url_for('math_unit_page', unit_code='MA02_3', page='example') }}" class="step-item">② 例題</a>
        <a href="{{ url_for('math_unit_page', unit_code='MA02_3', page='drill') }}" class="step-item">③ 演習</a>
        <a href="{{ url_for('math_unit_page', unit_code='MA02_3', page='check') }}" class="step-item">④ 確認</a>
    </div>

    <div class="intro-box">
        <p style="font-size: 1.3em; text-align: center;">大きな数字の約分は、一回で終わらなくても大丈夫！</p>
        
        <div class="fraction-flow">
            <div class="fraction">
                <div class="num">24</div>
                <div>36</div>
            </div>

            <span style="font-size: 2em;">→</span>

            <div class="fraction">
                <div class="num">
                    <div class="calc-box" style="top: -45px; left: -30px;">÷ 2</div>
                    <span class="cancel-line">24</span>
                    <span class="red-num" style="top: -20px; right: -25px;">12</span>
                </div>
                <div>
                    <div class="calc-box" style="bottom: -45px; left: -30px;">÷ 2</div>
                    <span class="cancel-line">36</span>
                    <span class="red-num" style="bottom: -20px; right: -25px;">18</span>
                </div>
            </div>

            <span style="font-size: 2em;">→</span>

            <div class="fraction">
                <div class="num">
                    <div class="calc-box" style="top: -45px; left: -30px;">÷ 6</div>
                    <span class="cancel-line">12</span>
                    <span class="red-num" style="top: -20px; right: -25px;">2</span>
                </div>
                <div>
                    <div class="calc-box" style="bottom: -45px; left: -30px;">÷ 6</div>
                    <span class="cancel-line">18</span>
                    <span class="red-num" style="bottom: -20px; right: -25px;">3</span>
                </div>
            </div>

            <span style="font-size: 2em;">＝</span>

            <div class="fraction">
                <div class="num">2</div>
                <div>3</div>
            </div>
        </div>

        <div class="blue-info-box">
            数字が大きいときは、まず<strong style="color: #dc2626;">2や3などの小さな数</strong>で割ってみましょう。<br>
            まだ割れるときは、さらに続けて割っていくのがコツです！
        </div>

        <div style="text-align: center; margin-top: 40px;">
            <a href="{{ url_for('math_unit_page', unit_code='MA02_3', page='example') }}" class="btn" style="padding: 15px 80px; border-radius: 50px; background-color: #3b82f6; color: white; text-decoration: none; font-weight: bold; font-size: 1.2em; display: inline-block;">
                ② 例題に進む ➔
            </a>
        </div>
    </div>
</div>
{% endblock %}