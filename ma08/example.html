{% extends "base.html" %}
{% block content %}
<style>
    .step-navigation { display: flex; gap: 10px; align-items: center; justify-content: center; margin-bottom: 30px; }
    .step-item { width: 120px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 25px; font-weight: bold; text-decoration: none; color: #666; background: #f8fafc; border: 1px solid #e2e8f0; }
    .step-item.active { background: #fae8ff; color: #701a75; border: 2px solid #d946ef; }
    
    .example-card { background: white; border-radius: 15px; border: 2px solid #d946ef; padding: 30px; }
    .math-row { background: #fdf4ff; padding: 25px; border-radius: 12px; margin: 20px 0; display: flex; align-items: center; justify-content: center; gap: 12px; font-size: 1.8em; flex-wrap: wrap; }
    .fraction { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; }
    .answer-box { border: 2px solid #d946ef; border-radius: 10px; width: 80px; height: 55px; text-align: center; font-size: 1em; font-weight: bold; outline: none; }
    .answer-box.correct { border-color: #22c55e; background: #f0fdf4; color: #15803d; }
    .check-btn { background: #d946ef; color: white; border: none; border-radius: 20px; padding: 10px 30px; font-size: 0.6em; font-weight: bold; cursor: pointer; }
</style>

<div class="page-container">
    <h1 style="color: #a21caf;">MA08 å¸¯åˆ†æ•°ã®è¨ˆç®— ã€â‘¡ ä¾‹é¡Œã€‘</h1>

    <div class="step-navigation">
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA08', page='intro') }}" class="step-item">â‘  å°å…¥</a>
        <div class="step-item active">â‘¡ ä¾‹é¡Œ</div>
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA08', page='drill') }}" class="step-item">â‘¢ æ¼”ç¿’</a>
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA08', page='check') }}" class="step-item">â‘£ ç¢ºèª</a>
    </div>

    <div class="example-card">
        <h3>ã€ä¾‹é¡Œã€‘ä¸€åº¦ã€Œä»®åˆ†æ•°ã€ã«ãªãŠã—ã¦è¨ˆç®—ã—ã¦ã¿ã‚ˆã†ã€‚</h3>

        <div class="math-row">
            <span>1</span>
            <div class="fraction"><span style="border-bottom: 2px solid #333;">1</span><span>5</span></div>
            <span>ï¼‹</span>
            <div class="fraction"><span style="border-bottom: 2px solid #333;">2</span><span>5</span></div>
            <span>ï¼</span>
            <div class="fraction">
                <input type="number" id="ex1_n" class="answer-box">
                <div style="height: 2px; background: #333; width: 100%; margin: 4px 0;"></div>
                <input type="number" id="ex1_d" class="answer-box">
            </div>
            <button class="check-btn" onclick="checkEx(1, 8, 5)">åˆ¤å®š</button>
        </div>

        <div class="math-row">
            <span>2</span>
            <div class="fraction"><span style="border-bottom: 2px solid #333;">4</span><span>7</span></div>
            <span>ï¼</span>
            <div class="fraction"><span style="border-bottom: 2px solid #333;">6</span><span>7</span></div>
            <span>ï¼</span>
            <div class="fraction">
                <input type="number" id="ex2_n" class="answer-box">
                <div style="height: 2px; background: #333; width: 100%; margin: 4px 0;"></div>
                <input type="number" id="ex2_d" class="answer-box">
            </div>
            <button class="check-btn" onclick="checkEx(2, 12, 7)">åˆ¤å®š</button>
        </div>

        <div id="res_msg" style="text-align: center; font-weight: bold; min-height: 1.5em; margin: 10px 0;"></div>

        <div style="background: #fffbeb; padding: 20px; border-radius: 12px; border: 1px solid #f59e0b; margin-top: 15px;">
            ğŸ’¡ <b>ã¨ãã‹ãŸã®ãƒ’ãƒ³ãƒˆï¼š</b><br>
            (1) \(1\frac{1}{5}\) ã¯ \(\frac{6}{5}\) ã§ã™ã€‚ \(\frac{6}{5} + \frac{2}{5}\) ã‚’è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚<br>
            (2) \(2\frac{4}{7}\) ã¯ \(\frac{18}{7}\) ã§ã™ã€‚ \(\frac{18}{7} - \frac{6}{7}\) ã‚’è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚
        </div>
    </div>
</div>

<script>
function checkEx(id, ansN, ansD) {
    const n = document.getElementById('ex' + id + '_n');
    const d = document.getElementById('ex' + id + '_d');
    const msg = document.getElementById('res_msg');
    if (parseInt(n.value) === ansN && parseInt(d.value) === ansD) {
        n.classList.add('correct'); d.classList.add('correct');
        msg.innerHTML = '<span style="color: #15803d;">æ­£è§£ï¼ä»®åˆ†æ•°ã«ãªãŠã›ã°ãƒãƒƒãƒãƒªã§ã™ã­ã€‚</span>';
    } else {
        msg.innerHTML = '<span style="color: #dc2626;">ãŠã£ã¨ã€ã‚‚ã†ä¸€åº¦å¸¯åˆ†æ•°ã‚’ãªãŠã—ã¦ã¿ã‚ˆã†ã€‚</span>';
    }
}
</script>
{% endblock %}