<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å®®å´å¤§å­¦ éå»å• é•·æ–‡èª­è§£ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</title>
  <style>
    body { font-family: sans-serif; max-width: 850px; margin: 0 auto; padding: 20px; background: #f0f2f5; }
    .card { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .sentence-item { border-left: 5px solid #007bff; background: #f8f9fa; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
    .btn-group { margin-top: 10px; display: flex; gap: 10px; }
    button { cursor: pointer; padding: 8px 15px; border-radius: 5px; border: 1px solid #ccc; background: #fff; }
    .active { background: #007bff !important; color: #fff; border-color: #007bff; }
    .translation, .explanation, .hint { display: none; margin-top: 10px; padding: 10px; border-radius: 5px; font-size: 0.9em; }
    .translation { background: #e7f3ff; color: #0056b3; }
    .explanation { background: #fff3cd; color: #856404; border: 1px dashed #ffeeba; }
    .dict-word { color: #007bff; font-weight: bold; border-bottom: 1px dashed #007bff; cursor: help; }
    .popup { position: absolute; background: #fff; border: 2px solid #007bff; padding: 10px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: none; z-index: 1000; width: 220px; }
    .choice-btn { display: block; width: 100%; text-align: left; margin: 5px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
    .result { font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>

<h1>ğŸ“ å®®å´å¤§å­¦ é•·æ–‡èª­è§£ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</h1>

<div id="nav" style="margin-bottom:20px;">
  <button id="nav-study" class="active" onclick="showMode('study')">ğŸ“š é•·æ–‡èª­è§£ãƒ»å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰</button>
  <button id="nav-quiz" onclick="showMode('quiz')">âœ… ã‚¯ã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰ï¼ˆå•é¡Œæ¼”ç¿’ï¼‰</button>
</div>

<div id="mode-study" class="card">
  <div id="study-content"></div>
</div>

<div id="mode-quiz" class="card" style="display:none;">
  <h3>ç©ºæ‰€è£œå……å•é¡Œ</h3>
  <p id="quiz-passage" style="line-height:1.8; margin-bottom:20px; background:#f9f9f9; padding:15px; border-radius:5px;"></p>
  <div id="quiz-questions"></div>
</div>

<div id="word-popup" class="popup"></div>

<script>
// --- å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã“ã“ã«ç›´æ¥åŸ‹ã‚è¾¼ã¿ã¾ã—ãŸ ---
const data = {
  sentences: [
    "A new study from an American university says that using the Internet for even a few hours a week makes people feel (1).",
    "Ninety-three families who used the Internet at home were studied for two years, and their emotional health was measured.",
    "(2) Those studied reported a decrease in communication with family and friends.",
    "Researchers said that this lessening of communication related directly to the amount of time spent using the Internet.",
    "One researcher said that this is because the people using the Internet during the study spent less time in important personal relationships with family and friends.",
    "\"With less interpersonal communication comes a greater feeling of loneliness, and loneliness causes sadness,\" noted one researcher involved in the study.",
    "William Scherlis, director of the university's Informational Technology Center and research team member, said the team was (3) by the results of the study.",
    "He said that the research team members had expected Internet users to feel happier and more involved with a wider range of people because using the Internet is an activity that involves communication.",
    "Should the results of this study cause concern?",
    "Mr. Scherlis said it would be wrong to decide that the Internet is a bad thing; however, he urged people to use good judgment about how they use it.",
    "He suggested, for example, placing the computer in a center of activity in the home so that the user would not be alone in a room away from other people.",
    "He also (4) suggested that people limit the amount of time they spend on the Internet.",
    "The researchers are planning to continue their research in order to find out more about the effects of the Internet.",
    "They would also like to learn if watching television causes the same effects."
  ],
  translations: ["é€±ã«æ•°æ™‚é–“ã®ãƒãƒƒãƒˆåˆ©ç”¨ã§ã‚‚äººã¯(1)ã¨æ„Ÿã˜ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚","93ä¸–å¸¯ã®ç²¾ç¥å¥åº·ãŒ2å¹´é–“æ¸¬å®šã•ã‚ŒãŸã€‚","(2)èª¿æŸ»å¯¾è±¡è€…ã¯ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ¸›å°‘ã‚’å ±å‘Šã—ãŸã€‚","æ¸›å°‘ã¯ãƒãƒƒãƒˆä½¿ç”¨æ™‚é–“ã¨ç›´æ¥é–¢é€£ã—ã¦ã„ãŸã€‚","å¯¾äººé–¢ä¿‚ã«è²»ã‚„ã™æ™‚é–“ãŒå°‘ãªããªã£ãŸãŸã‚ã ã€‚","ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ¸›ã‚‹ã¨å­¤ç‹¬æ„ŸãŒå¢—ã—ã€æ‚²ã—ã•ã‚’å¼•ãèµ·ã“ã™ã€‚","ã‚·ãƒ£ãƒ¼ãƒªã‚¹æ°ã¯ç ”ç©¶çµæœã«(3)ã•ã›ã‚‰ã‚ŒãŸã€‚","å½¼ã¯åˆ©ç”¨è€…ãŒã‚ˆã‚Šå¹¸ã›ã«ãªã‚‹ã¨äºˆæƒ³ã—ã¦ã„ãŸã€‚","ã“ã®çµæœã¯æ‡¸å¿µã™ã¹ãã‹ï¼Ÿ","ãƒãƒƒãƒˆãŒæ‚ªã„ã¨æ±ºã‚ã‚‹ã®ã¯é–“é•ã„ã ãŒã€è‰¯è­˜ã‚ã‚‹åˆ¤æ–­ã‚’ä¿ƒã—ãŸã€‚","PCã‚’å®¶æ—ã®æ´»å‹•ã®ä¸­å¿ƒã«ç½®ãã“ã¨ã‚’ææ¡ˆã—ãŸã€‚","(4)æ™‚é–“ã®åˆ¶é™ã‚‚ææ¡ˆã—ãŸã€‚","ç ”ç©¶ã‚’ç¶™ç¶šã™ã‚‹è¨ˆç”»ã ã€‚","ãƒ†ãƒ¬ãƒ“è¦–è´ã¨ã®æ¯”è¼ƒã‚‚è¡Œã„ãŸã„ã€‚"],
  structures: ["make O Cã€ŒOã‚’Cã®çŠ¶æ…‹ã«ã™ã‚‹ã€","were studied/was measured å—å‹•æ…‹ã®ä¸¦åˆ—","Those studiedã€Œèª¿æŸ»ã•ã‚ŒãŸäººã€…ã€","related directly to ï½ã€Œï½ã¨ç›´æ¥é–¢é€£ã™ã‚‹ã€","this is because ï½ã€Œã“ã‚Œã¯ï½ã ã‹ã‚‰ã ã€","With...comes S. å€’ç½®å½¢ã€‚æœ¬æ¥ã¯S comes with...","was (3) by...ã€Œï½ã«ã‚ˆã£ã¦(3)ã•ã›ã‚‰ã‚ŒãŸã€","had expected... éå»å®Œäº†å½¢","Should S V?ã€ŒSã¯Vã™ã¹ãã‹ï¼Ÿã€","it would be wrong to...ã€Œï½ã™ã‚‹ã®ã¯é–“é•ã„ã ã‚ã†ã€","suggested + ï½ingã€Œï½ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ãŸã€","suggest that S (should) V(åŸå½¢)","in order toã€Œï½ã™ã‚‹ãŸã‚ã«ã€","if...ã€Œï½ã‹ã©ã†ã‹ã€"],
  vocab: {
    "loneliness": { r: "ãƒ­ã‚¦ãƒ³ãƒªãƒã‚¹", m: "å­¤ç‹¬ã€å¯‚ã—ã•" },
    "emotional": { r: "ã‚¨ãƒ¢ã‚¦ã‚·ãƒ§ãƒŠãƒ«", m: "ç²¾ç¥çš„ãªã€æ„Ÿæƒ…çš„ãª" },
    "communication": { r: "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", m: "æ„æ€ç–é€šã€é€£çµ¡" },
    "involved": { r: "ã‚¤ãƒ³ãƒ´ã‚©ãƒ«ãƒ´ãƒ‰", m: "é–¢ã‚ã£ã¦ã„ã‚‹" }
  },
  problems: [
    { id: "(1)", choices: ["happier", "lonely", "busy"], ans: "lonely", hint: "ç¬¬6æ–‡ã®lonelinessã«æ³¨ç›®" },
    { id: "(3)", choices: ["surprised", "bored", "angry"], ans: "surprised", hint: "äºˆæƒ³ã¨çµæœãŒé€†ã§ã—ãŸ" }
  ]
};

// --- è¡¨ç¤ºå‡¦ç† ---
function init() {
  const studyDiv = document.getElementById('study-content');
  data.sentences.forEach((s, i) => {
    let html = s;
    // å˜èªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
    Object.keys(data.vocab).forEach(w => {
      const regex = new RegExp(`\\b${w}\\b`, 'gi');
      html = html.replace(regex, `<span class="dict-word" onmouseover="showVocab(event,'${w}')" onmouseout="hideVocab()">${w}</span>`);
    });

    studyDiv.innerHTML += `
      <div class="sentence-item">
        <div><strong>${i+1}.</strong> ${html}</div>
        <div class="btn-group">
          <button onclick="toggle('tr-${i}')">å’Œè¨³</button>
          <button onclick="toggle('st-${i}')">æ§‹é€ </button>
          <button onclick="speak('${s.replace(/'/g,"")}')">ğŸ”Š ç™ºéŸ³</button>
        </div>
        <div id="tr-${i}" class="translation">${data.translations[i]}</div>
        <div id="st-${i}" class="explanation">${data.structures[i]}</div>
      </div>`;
  });

  document.getElementById('quiz-passage').innerText = data.sentences.join(' ');
  const quizDiv = document.getElementById('quiz-questions');
  data.problems.forEach((p, i) => {
    quizDiv.innerHTML += `
      <div style="margin-bottom:20px; border-top:1px solid #eee; padding-top:10px;">
        <strong>å• ${p.id}:</strong> æœ€ã‚‚é©åˆ‡ãªå˜èªã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
        ${p.choices.map(c => `<button class="choice-btn" onclick="check(this,'${c}','${p.ans}','res-${i}')">${c}</button>`).join('')}
        <button onclick="toggle('h-${i}')" style="font-size:0.8em; margin-top:5px;">ğŸ’¡ ãƒ’ãƒ³ãƒˆ</button>
        <div id="h-${i}" class="explanation" style="background:#f0f0f0;">${p.hint}</div>
        <div id="res-${i}" class="result"></div>
      </div>`;
  });
}

function showMode(mode) {
  document.getElementById('mode-study').style.display = mode === 'study' ? 'block' : 'none';
  document.getElementById('mode-quiz').style.display = mode === 'quiz' ? 'block' : 'none';
  document.getElementById('nav-study').className = mode === 'study' ? 'active' : '';
  document.getElementById('nav-quiz').className = mode === 'quiz' ? 'active' : '';
}

function toggle(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === 'block' ? 'none' : 'block';
}

function speak(text) {
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'en-US';
  window.speechSynthesis.speak(u);
}

function showVocab(e, w) {
  const p = document.getElementById('word-popup');
  p.innerHTML = `<strong>${w}</strong><br><span style="color:red">${data.vocab[w].r}</span><br>${data.vocab[w].m}`;
  p.style.display = 'block';
  p.style.left = e.pageX + 10 + 'px';
  p.style.top = e.pageY + 10 + 'px';
}

function hideVocab() { document.getElementById('word-popup').style.display = 'none'; }

function check(btn, user, ans, resId) {
  const res = document.getElementById(resId);
  if(user === ans) { res.innerHTML = "âœ… æ­£è§£ï¼"; btn.style.background = "#d4edda"; }
  else { res.innerHTML = "âŒ ä¸æ­£è§£"; btn.style.background = "#f8d7da"; }
}

init();
</script>
</body>
</html>