{% extends "base.html" %}
{% block content %}
<style>
    .step-navigation { display: flex; gap: 10px; align-items: center; justify-content: center; margin-bottom: 30px; }
    .step-item { width: 120px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 25px; font-weight: bold; text-decoration: none; color: #666; background: #f8fafc; border: 1px solid #e2e8f0; }
    .step-item.active { background: #fee2e2; color: #991b1b; border: 2px solid #ef4444; }
    .example-card { background: white; border-radius: 15px; border: 2px solid #ef4444; padding: 30px; }
    .math-example-row { background: #fff5f5; padding: 25px; border-radius: 12px; margin: 20px 0; display: flex; align-items: center; justify-content: center; gap: 15px; }
    .fraction { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; }
    .answer-box { border: 2px solid #ef4444; border-radius: 10px; width: 70px; height: 50px; text-align: center; font-size: 1.5em; font-weight: bold; outline: none; }
    .answer-box.correct { border-color: #22c55e; background: #f0fdf4; color: #15803d; }
    .check-btn { background: #ef4444; color: white; border: none; border-radius: 20px; padding: 10px 30px; font-weight: bold; cursor: pointer; }
    .result-msg { font-weight: bold; text-align: center; height: 1.5em; margin-bottom: 10px; }
    .hint-fraction { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; font-weight: bold; margin: 0 5px; }
</style>

<div class="page-container">
    <h1 style="color: #dc2626;">MA05 1ã¨åˆ†æ•°ã®è¨ˆç®— ã€â‘¡ ä¾‹é¡Œã€‘</h1>

    <div class="step-navigation">
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA05', page='intro') }}" class="step-item">â‘  å°å…¥</a>
        <div class="step-item active">â‘¡ ä¾‹é¡Œ</div>
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA05', page='drill') }}" class="step-item">â‘¢ æ¼”ç¿’</a>
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA05', page='check') }}" class="step-item">â‘£ ç¢ºèª</a>
    </div>

    <div class="example-card">
        <h3>ã€ä¾‹é¡Œã€‘å››è§’ã«ã‚ã¦ã¯ã¾ã‚‹æ•°ã‚’ã„ã‚Œã¦ã¿ã¾ã—ã‚‡ã†ã€‚</h3>

        <div class="math-example-row">
            <span style="font-size: 2em; font-weight: bold;">1 ï¼‹</span>
            <div class="fraction"><span style="font-size: 1.8em; border-bottom: 2px solid #333;">5</span><span style="font-size: 1.8em;">6</span></div>
            <span style="font-size: 2em; font-weight: bold;">ï¼</span>
            <div class="fraction">
                <input type="number" id="ex1_n" class="answer-box">
                <div style="height: 2px; background: #333; width: 100%; margin: 4px 0;"></div>
                <input type="number" id="ex1_d" class="answer-box">
            </div>
            <button class="check-btn" onclick="checkEx(1, 11, 6)">ç­”ãˆã‚ã‚ã›</button>
        </div>
        <div id="res1" class="result-msg"></div>

        <div class="math-example-row">
            <span style="font-size: 2em; font-weight: bold;">1 ï¼</span>
            <div class="fraction"><span style="font-size: 1.8em; border-bottom: 2px solid #333;">3</span><span style="font-size: 1.8em;">7</span></div>
            <span style="font-size: 2em; font-weight: bold;">ï¼</span>
            <div class="fraction">
                <input type="number" id="ex2_n" class="answer-box">
                <div style="height: 2px; background: #333; width: 100%; margin: 4px 0;"></div>
                <input type="number" id="ex2_d" class="answer-box">
            </div>
            <button class="check-btn" onclick="checkEx(2, 4, 7)">ç­”ãˆã‚ã‚ã›</button>
        </div>
        <div id="res2" class="result-msg"></div>

        <div style="background: #fffbeb; padding: 20px; border-radius: 12px; border: 1px solid #f59e0b;">
            ğŸ’¡ <b>è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆï¼š</b><br>
            (1) ã§ã¯ 1 ã‚’ <div class="hint-fraction"><span style="border-bottom:1px solid #333;">6</span><span>6</span></div> ã«ã€(2) ã§ã¯ 1 ã‚’ <div class="hint-fraction"><span style="border-bottom:1px solid #333;">7</span><span>7</span></div> ã«ãªãŠã—ã¦è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚
        </div>
    </div>
    <div style="text-align: center; margin-top: 30px;">
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA05', page='drill') }}" class="btn" style="background: #dc2626; color: white; padding: 15px 80px; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1.3em;">æ¼”ç¿’å•é¡Œã«ã™ã™ã‚€ â”</a>
    </div>
</div>

<script>
function checkEx(id, an, ad){
    const n = document.getElementById('ex'+id+'_n'), d = document.getElementById('ex'+id+'_d'), r = document.getElementById('res'+id);
    if(parseInt(n.value)===an && parseInt(d.value)===ad){
        n.classList.add('correct'); d.classList.add('correct');
        r.innerHTML = '<span style="color: #15803d;">æ­£è§£ã§ã™ï¼</span>';
    } else {
        r.innerHTML = '<span style="color: #dc2626;">ã‚‚ã†ã„ã¡ã©è¨ˆç®—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</span>';
    }
}
</script>
{% endblock %}