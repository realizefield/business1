{% extends "base.html" %}
{% block content %}
<style>
    .step-navigation { display: flex; gap: 10px; align-items: center; justify-content: center; margin-bottom: 30px; }
    .step-item { width: 120px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 25px; font-weight: bold; text-decoration: none; color: #666; background: #f8fafc; border: 1px solid #e2e8f0; }
    .step-item.active { background: #dbeafe; color: #1e40af; border: 2px solid #3b82f6; }
    .example-card { background: white; border-radius: 15px; border: 2px solid #3b82f6; padding: 30px; }
    
    .math-example-row { background: #f0f7ff; padding: 25px; border-radius: 12px; margin: 20px 0; display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap; }
    .fraction { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; }
    .answer-box { border: 2px solid #3b82f6; border-radius: 10px; width: 75px; height: 50px; text-align: center; font-size: 1.5em; font-weight: bold; outline: none; }
    .answer-box.correct { border-color: #22c55e; background: #f0fdf4; color: #15803d; }
    
    .check-btn { background: #3b82f6; color: white; border: none; border-radius: 20px; padding: 10px 30px; font-weight: bold; cursor: pointer; }
    .result-msg { font-weight: bold; text-align: center; margin-top: -10px; margin-bottom: 20px; min-height: 1.5em; }
    .symbol { font-size: 2em; font-weight: bold; }
    
    /* ãƒ’ãƒ³ãƒˆç”¨åˆ†æ•°ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .hint-fraction { display: inline-flex; flex-direction: column; align-items: center; vertical-align: middle; font-weight: bold; margin: 0 5px; }
    .hint-n { border-bottom: 2px solid #1e40af; padding: 0 5px; }
    .hint-d { padding: 0 5px; }
</style>

<div class="page-container">
    <h1 style="color: #1e40af;">MA06 æ•´æ•°ã¨åˆ†æ•°ã®è¨ˆç®— ã€â‘¡ ä¾‹é¡Œã€‘</h1>

    <div class="step-navigation">
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA06', page='intro') }}" class="step-item">â‘  å°å…¥</a>
        <div class="step-item active">â‘¡ ä¾‹é¡Œ</div>
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA06', page='drill') }}" class="step-item">â‘¢ æ¼”ç¿’</a>
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA06', page='check') }}" class="step-item">â‘£ ç¢ºèª</a>
    </div>

    <div class="example-card">
        <h3>ã€ä¾‹é¡Œã€‘å››è§’ã«ã‚ã¦ã¯ã¾ã‚‹æ•°ã‚’ã„ã‚Œã¦ã¿ã¾ã—ã‚‡ã†ã€‚</h3>

        <div class="math-example-row">
            <span class="symbol">2 ï¼‹</span>
            <div class="fraction">
                <span style="font-size: 1.8em; border-bottom: 2px solid #333; padding: 0 10px;">5</span>
                <span style="font-size: 1.8em; padding: 0 10px;">6</span>
            </div>
            <span class="symbol">ï¼</span>
            <div class="fraction">
                <input type="number" id="ex1_n" class="answer-box" placeholder="?">
                <div style="height: 2px; background: #333; width: 100%; margin: 4px 0;"></div>
                <input type="number" id="ex1_d" class="answer-box" placeholder="?">
            </div>
            <button class="check-btn" onclick="checkExample(1, 17, 6)">ç­”ãˆã‚ã‚ã›</button>
        </div>
        <div id="res1" class="result-msg"></div>

        <div class="math-example-row">
            <span class="symbol">3 ï¼</span>
            <div class="fraction">
                <span style="font-size: 1.8em; border-bottom: 2px solid #333; padding: 0 10px;">3</span>
                <span style="font-size: 1.8em; padding: 0 10px;">7</span>
            </div>
            <span class="symbol">ï¼</span>
            <div class="fraction">
                <input type="number" id="ex2_n" class="answer-box" placeholder="?">
                <div style="height: 2px; background: #333; width: 100%; margin: 4px 0;"></div>
                <input type="number" id="ex2_d" class="answer-box" placeholder="?">
            </div>
            <button class="check-btn" onclick="checkExample(2, 18, 7)">ç­”ãˆã‚ã‚ã›</button>
        </div>
        <div id="res2" class="result-msg"></div>

        <div style="background: #fffbeb; padding: 20px; border-radius: 12px; border: 1px solid #f59e0b; margin-top: 10px;">
            ğŸ’¡ <b>è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆï¼š</b><br>
            (1) ã§ã¯ <div class="hint-fraction"><span class="hint-n">2</span><span class="hint-d">1</span></div> ã‚’é€šåˆ†ã—ã¦ 
            <div class="hint-fraction"><span class="hint-n">12</span><span class="hint-d">6</span></div> ã«ãªãŠã—ã¾ã™ã€‚<br>
            (2) ã§ã¯ <div class="hint-fraction"><span class="hint-n">3</span><span class="hint-d">1</span></div> ã‚’é€šåˆ†ã—ã¦ 
            <div class="hint-fraction"><span class="hint-n">21</span><span class="hint-d">7</span></div> ã«ãªãŠã—ã¦è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚
        </div>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <a href="{{ url_for('learning_page', subject='math', unit_code='MA06', page='drill') }}" class="btn" style="background: #3b82f6; color: white; padding: 15px 80px; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1.3em; box-shadow: 0 4px #1e40af;">æ¼”ç¿’å•é¡Œã«ã™ã™ã‚€ â”</a>
    </div>
</div>

<script>
function checkExample(id, ansN, ansD) {
    const n = document.getElementById('ex' + id + '_n');
    const d = document.getElementById('ex' + id + '_d');
    const res = document.getElementById('res' + id);
    if (parseInt(n.value) === ansN && parseInt(d.value) === ansD) {
        n.classList.add('correct'); d.classList.add('correct');
        res.innerHTML = '<span style="color: #15803d;">æ­£è§£ã§ã™ï¼</span>';
    } else {
        res.innerHTML = '<span style="color: #dc2626;">ã‚‚ã†ã„ã¡ã©è¨ˆç®—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</span>';
    }
}
</script>
{% endblock %}